<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Price Predictor - Technical Analysis</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìà Stock Price Predictor</h1>
            <p>Powered by XGBoost Machine Learning</p>
        </header>

        <main>
            <section class="input-section">
                <div class="input-group">
                    <label for="stockSymbol">Stock Symbol:</label>
                    <input type="text" id="stockSymbol" placeholder="e.g., AAPL, TSLA, 0020.HK" value="0020.HK">
                </div>

                <div class="input-group">
                    <label for="timePeriod">Time Period:</label>
                    <select id="timePeriod">
                        <option value="6mo">6 Months</option>
                        <option value="1y">1 Year</option>
                        <option value="2y" selected>2 Years</option>
                        <option value="5y">5 Years</option>
                        <option value="max">Maximum</option>
                    </select>
                </div>

                <div class="input-group">
                    <label>
                        <input type="checkbox" id="optimizeStrategy" checked>
                        Optimize Trading Strategy
                    </label>
                </div>

                <button id="predictBtn" class="predict-btn">
                    üîÆ Fetch & Predict
                </button>
            </section>

            <section id="loadingSection" class="loading-section" style="display: none;">
                <div class="spinner"></div>
                <p id="loadingMessage">Analyzing stock data...</p>
                <div style="width: 80%; margin: 20px auto; background: #e0e0e0; border-radius: 10px; height: 30px; overflow: hidden;">
                    <div id="progressBar" style="width: 0%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); transition: width 0.3s; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">
                        <span id="progressText">0%</span>
                    </div>
                </div>
            </section>

            <section id="resultSection" class="result-section" style="display: none;">
                <div class="prediction-card">
                    <h2>Prediction Result</h2>
                    <div id="predictionResult" class="prediction-result"></div>
                </div>

                <div class="metrics-card">
                    <h2>Model Performance</h2>
                    <div id="metricsResult" class="metrics-content"></div>
                </div>

                <div class="chart-card">
                    <h2>Stock Price Chart</h2>
                    <canvas id="priceChart"></canvas>
                </div>

                <div class="chart-card">
                    <h2>Composite Index</h2>
                    <canvas id="compositeChart"></canvas>
                </div>

                <div class="chart-card">
                    <h2>Strategy Performance</h2>
                    <canvas id="strategyChart"></canvas>
                </div>
            </section>

            <section id="errorSection" class="error-section" style="display: none;">
                <div class="error-message">
                    <h2>‚ö†Ô∏è Error</h2>
                    <p id="errorMessage"></p>
                </div>
            </section>
        </main>

        <footer>
            <p>Built with Python, XGBoost, and ‚ù§Ô∏è | <a href="https://github.com/ryZhangHason" target="_blank">GitHub</a></p>
        </footer>
    </div>

    <!-- Load Pyodide -->
    <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
    <!-- Load the Pyodide-based app -->
    <script src="js/pyodide-app.js"></script>
</body>
</html>
